(function(){var a,b,c,d,e,f,g,h;a=window.jQuery,b=window.location.hash.indexOf("debug")>0,c=function(a){if(b)return console.debug(a)},g=function(){var b;b={label:"resize",h:a("html").height()};return h(b)},h=function(a){c("Frame send: "+a.label+" to "+parent_url),a=JSON.stringify(a);return parent.postMessage(a,parent_url)},d=function(b){return a("form input, form textarea").each(function(){var c;c=a(this).attr("name");if(c in b)return a(this).val(b[c])})},f=function(a){var b;if(parent_url.indexOf(a.origin)!==0)c(a);else{b=JSON.parse(a.data),c("Frame receive: "+b.label+" from "+a.origin);if(b.label==="form_data")return d(b.data)}},e=function(){window.addEventListener!=null?window.addEventListener("message",f,false):window.attachEvent!=null&&window.attachEvent("onmessage",function(){return f(event)}),h({label:"ready",form_id:a("form").attr("id")});return g()},a(".close").live("click",function(){return h({label:"finished"})}),a(e)}).call(this)